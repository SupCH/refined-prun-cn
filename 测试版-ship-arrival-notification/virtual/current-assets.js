import { sumBy } from './sum-by.js';
import { balancesStore } from './balances.js';
import { cxosStore } from './cxos.js';
import { fxosStore } from './fxos.js';
import {
  sumLoanInterest,
  sumAccountsPayable,
  sumLoanRepayments,
  partnerCurrentConditions,
} from './contract-conditions.js';
import { sumMapValues } from './utils.js';
import { inventory } from './inventory.js';
import { sum } from './sum.js';
import { computed } from './runtime-core.esm-bundler.js';
const cashTotal = computed(() => sumBy(balancesStore.all.value, x => x.amount));
const cxDeposits = computed(() => {
  const orders = cxosStore.active.value;
  if (!orders) {
    return void 0;
  }
  const deposits = /* @__PURE__ */ new Map();
  const buyOrders = orders.filter(x => x.type === 'BUYING');
  for (const order of buyOrders) {
    const deposit = order.limit.amount * order.amount;
    const currency = order.limit.currency;
    deposits.set(currency, (deposits.get(currency) ?? 0) + deposit);
  }
  return deposits;
});
const cxDepositsTotal = computed(() => sumMapValues(cxDeposits.value));
const fxDeposits = computed(() => {
  const orders = fxosStore.active.value;
  if (!orders) {
    return void 0;
  }
  const deposits = /* @__PURE__ */ new Map();
  for (const order of orders) {
    let deposit;
    let currency;
    if (order.type === 'SELLING') {
      deposit = order.amount.amount;
      currency = order.limit.base;
    } else {
      deposit = order.amount.amount * order.limit.rate;
      currency = order.limit.quote;
    }
    deposits.set(currency, (deposits.get(currency) ?? 0) + deposit);
  }
  return deposits;
});
const fxDepositsTotal = computed(() => sumMapValues(fxDeposits.value));
computed(() => sum(cxDepositsTotal.value, fxDepositsTotal.value));
const interestReceivable = computed(() => sumLoanInterest(partnerCurrentConditions));
const accountsReceivable = computed(() => sumAccountsPayable(partnerCurrentConditions));
const shortTermLoans = computed(() => sumLoanRepayments(partnerCurrentConditions));
const currentAssets = {
  cashTotal,
  cxDeposits,
  cxDepositsTotal,
  fxDeposits,
  fxDepositsTotal,
  interestReceivable,
  accountsReceivable,
  shortTermLoans,
  inventory,
};
export { currentAssets };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VycmVudC1hc3NldHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JlL2JhbGFuY2UvY3VycmVudC1hc3NldHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VtQnkgfSBmcm9tICdAc3JjL3V0aWxzL3N1bS1ieSc7XG5pbXBvcnQgeyBiYWxhbmNlc1N0b3JlIH0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL2JhbGFuY2VzJztcbmltcG9ydCB7IGN4b3NTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jeG9zJztcbmltcG9ydCB7IGZ4b3NTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9meG9zJztcbmltcG9ydCB7XG4gIHBhcnRuZXJDdXJyZW50Q29uZGl0aW9ucyxcbiAgc3VtTG9hblJlcGF5bWVudHMsXG4gIHN1bUFjY291bnRzUGF5YWJsZSxcbiAgc3VtTG9hbkludGVyZXN0LFxufSBmcm9tICdAc3JjL2NvcmUvYmFsYW5jZS9jb250cmFjdC1jb25kaXRpb25zJztcbmltcG9ydCB7IHN1bU1hcFZhbHVlcyB9IGZyb20gJ0BzcmMvY29yZS9iYWxhbmNlL3V0aWxzJztcbmltcG9ydCB7IGludmVudG9yeSB9IGZyb20gJ0BzcmMvY29yZS9iYWxhbmNlL2ludmVudG9yeSc7XG5pbXBvcnQgeyBzdW0gfSBmcm9tICdAc3JjL3V0aWxzL3N1bSc7XG5cbmNvbnN0IGNhc2hUb3RhbCA9IGNvbXB1dGVkKCgpID0+IHN1bUJ5KGJhbGFuY2VzU3RvcmUuYWxsLnZhbHVlLCB4ID0+IHguYW1vdW50KSk7XG5cbnR5cGUgQ3VycmVuY3kgPSBzdHJpbmc7XG5cbmNvbnN0IGN4RGVwb3NpdHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGNvbnN0IG9yZGVycyA9IGN4b3NTdG9yZS5hY3RpdmUudmFsdWU7XG4gIGlmICghb3JkZXJzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBjb25zdCBkZXBvc2l0cyA9IG5ldyBNYXA8Q3VycmVuY3ksIG51bWJlcj4oKTtcbiAgY29uc3QgYnV5T3JkZXJzID0gb3JkZXJzLmZpbHRlcih4ID0+IHgudHlwZSA9PT0gJ0JVWUlORycpO1xuXG4gIGZvciAoY29uc3Qgb3JkZXIgb2YgYnV5T3JkZXJzKSB7XG4gICAgY29uc3QgZGVwb3NpdCA9IG9yZGVyLmxpbWl0LmFtb3VudCAqIG9yZGVyLmFtb3VudDtcbiAgICBjb25zdCBjdXJyZW5jeSA9IG9yZGVyLmxpbWl0LmN1cnJlbmN5O1xuICAgIGRlcG9zaXRzLnNldChjdXJyZW5jeSwgKGRlcG9zaXRzLmdldChjdXJyZW5jeSkgPz8gMCkgKyBkZXBvc2l0KTtcbiAgfVxuXG4gIHJldHVybiBkZXBvc2l0cztcbn0pO1xuXG5jb25zdCBjeERlcG9zaXRzVG90YWwgPSBjb21wdXRlZCgoKSA9PiBzdW1NYXBWYWx1ZXMoY3hEZXBvc2l0cy52YWx1ZSkpO1xuXG5jb25zdCBmeERlcG9zaXRzID0gY29tcHV0ZWQoKCkgPT4ge1xuICBjb25zdCBvcmRlcnMgPSBmeG9zU3RvcmUuYWN0aXZlLnZhbHVlO1xuICBpZiAoIW9yZGVycykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3QgZGVwb3NpdHMgPSBuZXcgTWFwPEN1cnJlbmN5LCBudW1iZXI+KCk7XG5cbiAgZm9yIChjb25zdCBvcmRlciBvZiBvcmRlcnMpIHtcbiAgICBsZXQgZGVwb3NpdDogbnVtYmVyO1xuICAgIGxldCBjdXJyZW5jeTogc3RyaW5nO1xuICAgIGlmIChvcmRlci50eXBlID09PSAnU0VMTElORycpIHtcbiAgICAgIGRlcG9zaXQgPSBvcmRlci5hbW91bnQuYW1vdW50O1xuICAgICAgY3VycmVuY3kgPSBvcmRlci5saW1pdC5iYXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZXBvc2l0ID0gb3JkZXIuYW1vdW50LmFtb3VudCAqIG9yZGVyLmxpbWl0LnJhdGU7XG4gICAgICBjdXJyZW5jeSA9IG9yZGVyLmxpbWl0LnF1b3RlO1xuICAgIH1cbiAgICBkZXBvc2l0cy5zZXQoY3VycmVuY3ksIChkZXBvc2l0cy5nZXQoY3VycmVuY3kpID8/IDApICsgZGVwb3NpdCk7XG4gIH1cblxuICByZXR1cm4gZGVwb3NpdHM7XG59KTtcblxuY29uc3QgZnhEZXBvc2l0c1RvdGFsID0gY29tcHV0ZWQoKCkgPT4gc3VtTWFwVmFsdWVzKGZ4RGVwb3NpdHMudmFsdWUpKTtcblxuY29uc3QgZGVwb3NpdHNUb3RhbCA9IGNvbXB1dGVkKCgpID0+IHN1bShjeERlcG9zaXRzVG90YWwudmFsdWUsIGZ4RGVwb3NpdHNUb3RhbC52YWx1ZSkpO1xuXG5jb25zdCBpbnRlcmVzdFJlY2VpdmFibGUgPSBjb21wdXRlZCgoKSA9PiBzdW1Mb2FuSW50ZXJlc3QocGFydG5lckN1cnJlbnRDb25kaXRpb25zKSk7XG5cbmNvbnN0IGFjY291bnRzUmVjZWl2YWJsZSA9IGNvbXB1dGVkKCgpID0+IHN1bUFjY291bnRzUGF5YWJsZShwYXJ0bmVyQ3VycmVudENvbmRpdGlvbnMpKTtcblxuY29uc3Qgc2hvcnRUZXJtTG9hbnMgPSBjb21wdXRlZCgoKSA9PiBzdW1Mb2FuUmVwYXltZW50cyhwYXJ0bmVyQ3VycmVudENvbmRpdGlvbnMpKTtcblxuZXhwb3J0IGNvbnN0IGN1cnJlbnRBc3NldHMgPSB7XG4gIGNhc2hUb3RhbCxcbiAgY3hEZXBvc2l0cyxcbiAgY3hEZXBvc2l0c1RvdGFsLFxuICBmeERlcG9zaXRzLFxuICBmeERlcG9zaXRzVG90YWwsXG4gIGRlcG9zaXRzVG90YWwsXG4gIGludGVyZXN0UmVjZWl2YWJsZSxcbiAgYWNjb3VudHNSZWNlaXZhYmxlLFxuICBzaG9ydFRlcm1Mb2FucyxcbiAgaW52ZW50b3J5LFxufTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFjQSxNQUFBLFlBQUEsU0FBQSxNQUFBLE1BQUEsY0FBQSxJQUFBLE9BQUEsQ0FBQSxNQUFBLEVBQUEsTUFBQSxDQUFBO0FBSUEsTUFBQSxhQUFBLFNBQUEsTUFBQTtBQUNFLFFBQUEsU0FBQSxVQUFBLE9BQUE7QUFDQSxNQUFBLENBQUEsUUFBQTtBQUNFLFdBQUE7QUFBQSxFQUFPO0FBRVQsUUFBQSxXQUFBLG9CQUFBLElBQUE7QUFDQSxRQUFBLFlBQUEsT0FBQSxPQUFBLENBQUEsTUFBQSxFQUFBLFNBQUEsUUFBQTtBQUVBLGFBQUEsU0FBQSxXQUFBO0FBQ0UsVUFBQSxVQUFBLE1BQUEsTUFBQSxTQUFBLE1BQUE7QUFDQSxVQUFBLFdBQUEsTUFBQSxNQUFBO0FBQ0EsYUFBQSxJQUFBLFdBQUEsU0FBQSxJQUFBLFFBQUEsS0FBQSxLQUFBLE9BQUE7QUFBQSxFQUE4RDtBQUdoRSxTQUFBO0FBQ0YsQ0FBQTtBQUVBLE1BQUEsa0JBQUEsU0FBQSxNQUFBLGFBQUEsV0FBQSxLQUFBLENBQUE7QUFFQSxNQUFBLGFBQUEsU0FBQSxNQUFBO0FBQ0UsUUFBQSxTQUFBLFVBQUEsT0FBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBO0FBQ0UsV0FBQTtBQUFBLEVBQU87QUFFVCxRQUFBLFdBQUEsb0JBQUEsSUFBQTtBQUVBLGFBQUEsU0FBQSxRQUFBO0FBQ0UsUUFBQTtBQUNBLFFBQUE7QUFDQSxRQUFBLE1BQUEsU0FBQSxXQUFBO0FBQ0UsZ0JBQUEsTUFBQSxPQUFBO0FBQ0EsaUJBQUEsTUFBQSxNQUFBO0FBQUEsSUFBdUIsT0FBQTtBQUV2QixnQkFBQSxNQUFBLE9BQUEsU0FBQSxNQUFBLE1BQUE7QUFDQSxpQkFBQSxNQUFBLE1BQUE7QUFBQSxJQUF1QjtBQUV6QixhQUFBLElBQUEsV0FBQSxTQUFBLElBQUEsUUFBQSxLQUFBLEtBQUEsT0FBQTtBQUFBLEVBQThEO0FBR2hFLFNBQUE7QUFDRixDQUFBO0FBRUEsTUFBQSxrQkFBQSxTQUFBLE1BQUEsYUFBQSxXQUFBLEtBQUEsQ0FBQTtBQUVBLFNBQUEsTUFBQSxJQUFBLGdCQUFBLE9BQUEsZ0JBQUEsS0FBQSxDQUFBO0FBRUEsTUFBQSxxQkFBQSxTQUFBLE1BQUEsZ0JBQUEsd0JBQUEsQ0FBQTtBQUVBLE1BQUEscUJBQUEsU0FBQSxNQUFBLG1CQUFBLHdCQUFBLENBQUE7QUFFQSxNQUFBLGlCQUFBLFNBQUEsTUFBQSxrQkFBQSx3QkFBQSxDQUFBO0FBRU8sTUFBQSxnQkFBQTtBQUFBLEVBQXNCO0FBQUEsRUFDM0I7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUVBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBRUY7In0=
