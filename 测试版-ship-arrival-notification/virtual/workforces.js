import { createEntityStore } from './create-entity-store.js';
import { onApiMessage } from './api-messages.js';
import { createRequestGetter, request } from './request-hooks2.js';
import { createMapGetter } from './create-map-getter.js';
const store = createEntityStore(x => x.siteId);
const state = store.state;
onApiMessage({
  WORKFORCE_WORKFORCES(data) {
    store.setOne(data);
    store.setFetched();
  },
  WORKFORCE_WORKFORCES_UPDATED(data) {
    store.setOne(data);
  },
});
const getByShortId = createMapGetter(state.all, x => x.siteId.substring(0, 8));
const getByAnyId = value => state.getById(value) ?? getByShortId(value);
const getById = createRequestGetter(getByAnyId, x => request.workforce(x));
const workforcesStore = {
  ...state,
  getById,
};
export { workforcesStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2ZvcmNlcy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvd29ya2ZvcmNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbnRpdHlTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jcmVhdGUtZW50aXR5LXN0b3JlJztcbmltcG9ydCB7IG9uQXBpTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdEdldHRlciwgcmVxdWVzdCB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9yZXF1ZXN0LWhvb2tzJztcbmltcG9ydCB7IGNyZWF0ZU1hcEdldHRlciB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jcmVhdGUtbWFwLWdldHRlcic7XG5cbmludGVyZmFjZSBFbnRpdHkge1xuICBhZGRyZXNzOiBQcnVuQXBpLkFkZHJlc3M7XG4gIHNpdGVJZDogc3RyaW5nO1xuICB3b3JrZm9yY2VzOiBQcnVuQXBpLldvcmtmb3JjZVtdO1xufVxuXG5jb25zdCBzdG9yZSA9IGNyZWF0ZUVudGl0eVN0b3JlPEVudGl0eT4oeCA9PiB4LnNpdGVJZCk7XG5jb25zdCBzdGF0ZSA9IHN0b3JlLnN0YXRlO1xuXG5vbkFwaU1lc3NhZ2Uoe1xuICBXT1JLRk9SQ0VfV09SS0ZPUkNFUyhkYXRhOiBFbnRpdHkpIHtcbiAgICBzdG9yZS5zZXRPbmUoZGF0YSk7XG4gICAgc3RvcmUuc2V0RmV0Y2hlZCgpO1xuICB9LFxuICBXT1JLRk9SQ0VfV09SS0ZPUkNFU19VUERBVEVEKGRhdGE6IEVudGl0eSkge1xuICAgIHN0b3JlLnNldE9uZShkYXRhKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBnZXRCeVNob3J0SWQgPSBjcmVhdGVNYXBHZXR0ZXIoc3RhdGUuYWxsLCB4ID0+IHguc2l0ZUlkLnN1YnN0cmluZygwLCA4KSk7XG5cbmNvbnN0IGdldEJ5QW55SWQgPSAodmFsdWU/OiBzdHJpbmcgfCBudWxsKSA9PiBzdGF0ZS5nZXRCeUlkKHZhbHVlKSA/PyBnZXRCeVNob3J0SWQodmFsdWUpO1xuXG5jb25zdCBnZXRCeUlkID0gY3JlYXRlUmVxdWVzdEdldHRlcihnZXRCeUFueUlkLCB4ID0+IHJlcXVlc3Qud29ya2ZvcmNlKHgpKTtcblxuZXhwb3J0IGNvbnN0IHdvcmtmb3JjZXNTdG9yZSA9IHtcbiAgLi4uc3RhdGUsXG4gIGdldEJ5SWQsXG59O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFXQSxNQUFNLFFBQVEsa0JBQTBCLENBQUEsTUFBSyxFQUFFLE1BQU07QUFDckQsTUFBTSxRQUFRLE1BQU07QUFFcEIsYUFBYTtBQUFBLEVBQ1gscUJBQXFCLE1BQWM7QUFDakMsVUFBTSxPQUFPLElBQUk7QUFDakIsVUFBTSxXQUFBO0FBQUEsRUFDUjtBQUFBLEVBQ0EsNkJBQTZCLE1BQWM7QUFDekMsVUFBTSxPQUFPLElBQUk7QUFBQSxFQUNuQjtBQUNGLENBQUM7QUFFRCxNQUFNLGVBQWUsZ0JBQWdCLE1BQU0sS0FBSyxDQUFBLE1BQUssRUFBRSxPQUFPLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFFN0UsTUFBTSxhQUFhLENBQUMsVUFBMEIsTUFBTSxRQUFRLEtBQUssS0FBSyxhQUFhLEtBQUs7QUFFeEYsTUFBTSxVQUFVLG9CQUFvQixZQUFZLE9BQUssUUFBUSxVQUFVLENBQUMsQ0FBQztBQUVsRSxNQUFNLGtCQUFrQjtBQUFBLEVBQzdCLEdBQUc7QUFBQSxFQUNIO0FBQ0Y7In0=
