import { createEntityStore } from './create-entity-store.js';
import { onApiMessage } from './api-messages.js';
import { createMapGetter, createGroupMapGetter } from './create-map-getter.js';
const store = createEntityStore();
const state = store.state;
onApiMessage({
  STORAGE_STORAGES(data) {
    store.setMany(data.stores);
    store.setFetched();
  },
  STORAGE_CHANGE(data) {
    store.setMany(data.stores);
  },
  STORAGE_REMOVED(data) {
    for (const id of data.storeIds) {
      store.removeOne(id);
    }
  },
});
const getByShortId = createMapGetter(state.all, x => x.id.substring(0, 8));
const getById = value => state.getById(value) ?? getByShortId(value);
const getByAddressableId = createGroupMapGetter(state.all, x => x.addressableId);
const getByName = createGroupMapGetter(state.all, x => x.name ?? '');
const storagesStore = {
  ...state,
  getById,
  getByAddressableId,
  getByName,
};
export { storagesStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvc3RvcmFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbnRpdHlTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jcmVhdGUtZW50aXR5LXN0b3JlJztcbmltcG9ydCB7IG9uQXBpTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlR3JvdXBNYXBHZXR0ZXIsXG4gIGNyZWF0ZU1hcEdldHRlcixcbn0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL2NyZWF0ZS1tYXAtZ2V0dGVyJztcblxuY29uc3Qgc3RvcmUgPSBjcmVhdGVFbnRpdHlTdG9yZTxQcnVuQXBpLlN0b3JlPigpO1xuY29uc3Qgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcblxub25BcGlNZXNzYWdlKHtcbiAgU1RPUkFHRV9TVE9SQUdFUyhkYXRhOiB7IHN0b3JlczogUHJ1bkFwaS5TdG9yZVtdIH0pIHtcbiAgICBzdG9yZS5zZXRNYW55KGRhdGEuc3RvcmVzKTtcbiAgICBzdG9yZS5zZXRGZXRjaGVkKCk7XG4gIH0sXG4gIFNUT1JBR0VfQ0hBTkdFKGRhdGE6IHsgc3RvcmVzOiBQcnVuQXBpLlN0b3JlW10gfSkge1xuICAgIHN0b3JlLnNldE1hbnkoZGF0YS5zdG9yZXMpO1xuICB9LFxuICBTVE9SQUdFX1JFTU9WRUQoZGF0YTogeyBzdG9yZUlkczogc3RyaW5nW10gfSkge1xuICAgIGZvciAoY29uc3QgaWQgb2YgZGF0YS5zdG9yZUlkcykge1xuICAgICAgc3RvcmUucmVtb3ZlT25lKGlkKTtcbiAgICB9XG4gIH0sXG59KTtcblxuY29uc3QgZ2V0QnlTaG9ydElkID0gY3JlYXRlTWFwR2V0dGVyKHN0YXRlLmFsbCwgeCA9PiB4LmlkLnN1YnN0cmluZygwLCA4KSk7XG5cbmNvbnN0IGdldEJ5SWQgPSAodmFsdWU/OiBzdHJpbmcgfCBudWxsKSA9PiBzdGF0ZS5nZXRCeUlkKHZhbHVlKSA/PyBnZXRCeVNob3J0SWQodmFsdWUpO1xuXG5jb25zdCBnZXRCeUFkZHJlc3NhYmxlSWQgPSBjcmVhdGVHcm91cE1hcEdldHRlcihzdGF0ZS5hbGwsIHggPT4geC5hZGRyZXNzYWJsZUlkKTtcblxuY29uc3QgZ2V0QnlOYW1lID0gY3JlYXRlR3JvdXBNYXBHZXR0ZXIoc3RhdGUuYWxsLCB4ID0+IHgubmFtZSA/PyAnJyk7XG5cbmV4cG9ydCBjb25zdCBzdG9yYWdlc1N0b3JlID0ge1xuICAuLi5zdGF0ZSxcbiAgZ2V0QnlJZCxcbiAgZ2V0QnlBZGRyZXNzYWJsZUlkLFxuICBnZXRCeU5hbWUsXG59O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQU9BLE1BQU0sUUFBUSxrQkFBQTtBQUNkLE1BQU0sUUFBUSxNQUFNO0FBRXBCLGFBQWE7QUFBQSxFQUNYLGlCQUFpQixNQUFtQztBQUNsRCxVQUFNLFFBQVEsS0FBSyxNQUFNO0FBQ3pCLFVBQU0sV0FBQTtBQUFBLEVBQ1I7QUFBQSxFQUNBLGVBQWUsTUFBbUM7QUFDaEQsVUFBTSxRQUFRLEtBQUssTUFBTTtBQUFBLEVBQzNCO0FBQUEsRUFDQSxnQkFBZ0IsTUFBOEI7QUFDNUMsZUFBVyxNQUFNLEtBQUssVUFBVTtBQUM5QixZQUFNLFVBQVUsRUFBRTtBQUFBLElBQ3BCO0FBQUEsRUFDRjtBQUNGLENBQUM7QUFFRCxNQUFNLGVBQWUsZ0JBQWdCLE1BQU0sS0FBSyxDQUFBLE1BQUssRUFBRSxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFFekUsTUFBTSxVQUFVLENBQUMsVUFBMEIsTUFBTSxRQUFRLEtBQUssS0FBSyxhQUFhLEtBQUs7QUFFckYsTUFBTSxxQkFBcUIscUJBQXFCLE1BQU0sS0FBSyxDQUFBLE1BQUssRUFBRSxhQUFhO0FBRS9FLE1BQU0sWUFBWSxxQkFBcUIsTUFBTSxLQUFLLENBQUEsTUFBSyxFQUFFLFFBQVEsRUFBRTtBQUU1RCxNQUFNLGdCQUFnQjtBQUFBLEVBQzNCLEdBQUc7QUFBQSxFQUNIO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjsifQ==
