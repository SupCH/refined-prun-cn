import {
  sumAccountsPayable,
  partnerNonCurrentConditions,
  sumLoanRepayments,
  sumShipmentDeliveries,
  sumMaterialsPickup,
  sumDeliveries,
  selfNonCurrentConditions,
} from './contract-conditions.js';
import { buildings, buildingsNetValueByLocation } from './buildings2.js';
import { sum } from './sum.js';
import { blueprintsStore } from './blueprints.js';
import { sumBy } from './sum-by.js';
import { shipsStore } from './ships.js';
import { sumMaterialAmountPrice } from './cx.js';
import { shipyardProjectsStore } from './shipyard-projects.js';
import { map } from './map-values.js';
import { companyStore } from './company.js';
import { calculateHQUpgradeMaterials } from './hq.js';
import { computed } from './runtime-core.esm-bundler.js';
const builtShips = computed(() => {
  blueprintsStore.request();
  return sumBy(shipsStore.all.value, calculateShipValue);
});
function calculateShipValue(ship) {
  const blueprint = blueprintsStore.getByNaturalId(ship.blueprintNaturalId);
  return sumMaterialAmountPrice(blueprint?.billOfMaterial.quantities);
}
const startedShips = computed(() =>
  sumBy(
    shipyardProjectsStore.all.value?.filter(x => x.status === 'STARTED'),
    x => sumMaterialAmountPrice(x.inventory.items),
  ),
);
const shipsMarketValue = computed(() => sum(builtShips.value, startedShips.value));
const shipsDepreciation = computed(() => {
  return sumBy(shipsStore.all.value, x => sumMaterialAmountPrice(x.repairMaterials));
});
const hqLevel = computed(() => map([companyStore.value], x => x.headquarters.level));
const hqBuiltLevels = computed(() =>
  map([hqLevel.value], x => sumMaterialAmountPrice(calculateHQUpgradeMaterials(0, x))),
);
const hqAssignedItems = computed(() =>
  map([companyStore.value], x => sumMaterialAmountPrice(x.headquarters.inventory.items)),
);
const hqUpgrades = computed(() => map([hqBuiltLevels.value, hqAssignedItems.value], sum));
const arc = computed(() => companyStore.value?.representation.contributedTotal.amount);
const accountsReceivable = computed(() => sumAccountsPayable(partnerNonCurrentConditions));
const longTermLoans = computed(() => sumLoanRepayments(partnerNonCurrentConditions));
const materialsInTransit = computed(() => sumShipmentDeliveries(partnerNonCurrentConditions));
const materialsReceivable = computed(() =>
  sum(sumDeliveries(partnerNonCurrentConditions), sumMaterialsPickup(selfNonCurrentConditions)),
);
const nonCurrentAssets = {
  buildings,
  buildingsNetValueByLocation,
  shipsMarketValue,
  shipsDepreciation,
  accountsReceivable,
  materialsInTransit,
  materialsReceivable,
  longTermLoans,
  hqUpgrades,
  arc,
};
export { nonCurrentAssets };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9uLWN1cnJlbnQtYXNzZXRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS9iYWxhbmNlL25vbi1jdXJyZW50LWFzc2V0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBwYXJ0bmVyTm9uQ3VycmVudENvbmRpdGlvbnMsXG4gIHNlbGZOb25DdXJyZW50Q29uZGl0aW9ucyxcbiAgc3VtQWNjb3VudHNQYXlhYmxlLFxuICBzdW1Mb2FuUmVwYXltZW50cyxcbiAgc3VtRGVsaXZlcmllcyxcbiAgc3VtU2hpcG1lbnREZWxpdmVyaWVzLFxuICBzdW1NYXRlcmlhbHNQaWNrdXAsXG59IGZyb20gJ0BzcmMvY29yZS9iYWxhbmNlL2NvbnRyYWN0LWNvbmRpdGlvbnMnO1xuaW1wb3J0IHsgYnVpbGRpbmdzLCBidWlsZGluZ3NOZXRWYWx1ZUJ5TG9jYXRpb24gfSBmcm9tICdAc3JjL2NvcmUvYmFsYW5jZS9idWlsZGluZ3MnO1xuaW1wb3J0IHsgc3VtIH0gZnJvbSAnQHNyYy91dGlscy9zdW0nO1xuaW1wb3J0IHsgYmx1ZXByaW50c1N0b3JlIH0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL2JsdWVwcmludHMnO1xuaW1wb3J0IHsgc3VtQnkgfSBmcm9tICdAc3JjL3V0aWxzL3N1bS1ieSc7XG5pbXBvcnQgeyBzaGlwc1N0b3JlIH0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL3NoaXBzJztcbmltcG9ydCB7IHN1bU1hdGVyaWFsQW1vdW50UHJpY2UgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL2Zpby9jeCc7XG5pbXBvcnQgeyBzaGlweWFyZFByb2plY3RzU3RvcmUgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvc2hpcHlhcmQtcHJvamVjdHMnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAnQHNyYy91dGlscy9tYXAtdmFsdWVzJztcbmltcG9ydCB7IGNvbXBhbnlTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jb21wYW55JztcbmltcG9ydCB7IGNhbGN1bGF0ZUhRVXBncmFkZU1hdGVyaWFscyB9IGZyb20gJ0BzcmMvY29yZS9ocSc7XG5cbmNvbnN0IGJ1aWx0U2hpcHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGJsdWVwcmludHNTdG9yZS5yZXF1ZXN0KCk7XG4gIHJldHVybiBzdW1CeShzaGlwc1N0b3JlLmFsbC52YWx1ZSwgY2FsY3VsYXRlU2hpcFZhbHVlKTtcbn0pO1xuXG5mdW5jdGlvbiBjYWxjdWxhdGVTaGlwVmFsdWUoc2hpcDogUHJ1bkFwaS5TaGlwKSB7XG4gIGNvbnN0IGJsdWVwcmludCA9IGJsdWVwcmludHNTdG9yZS5nZXRCeU5hdHVyYWxJZChzaGlwLmJsdWVwcmludE5hdHVyYWxJZCk7XG4gIHJldHVybiBzdW1NYXRlcmlhbEFtb3VudFByaWNlKGJsdWVwcmludD8uYmlsbE9mTWF0ZXJpYWwucXVhbnRpdGllcyk7XG59XG5cbmNvbnN0IHN0YXJ0ZWRTaGlwcyA9IGNvbXB1dGVkKCgpID0+XG4gIHN1bUJ5KFxuICAgIHNoaXB5YXJkUHJvamVjdHNTdG9yZS5hbGwudmFsdWU/LmZpbHRlcih4ID0+IHguc3RhdHVzID09PSAnU1RBUlRFRCcpLFxuICAgIHggPT4gc3VtTWF0ZXJpYWxBbW91bnRQcmljZSh4LmludmVudG9yeS5pdGVtcyksXG4gICksXG4pO1xuXG5jb25zdCBzaGlwc01hcmtldFZhbHVlID0gY29tcHV0ZWQoKCkgPT4gc3VtKGJ1aWx0U2hpcHMudmFsdWUsIHN0YXJ0ZWRTaGlwcy52YWx1ZSkpO1xuXG5jb25zdCBzaGlwc0RlcHJlY2lhdGlvbiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIHN1bUJ5KHNoaXBzU3RvcmUuYWxsLnZhbHVlLCB4ID0+IHN1bU1hdGVyaWFsQW1vdW50UHJpY2UoeC5yZXBhaXJNYXRlcmlhbHMpKTtcbn0pO1xuXG5jb25zdCBocUxldmVsID0gY29tcHV0ZWQoKCkgPT4gbWFwKFtjb21wYW55U3RvcmUudmFsdWVdLCB4ID0+IHguaGVhZHF1YXJ0ZXJzLmxldmVsKSk7XG5cbmNvbnN0IGhxQnVpbHRMZXZlbHMgPSBjb21wdXRlZCgoKSA9PlxuICBtYXAoW2hxTGV2ZWwudmFsdWVdLCB4ID0+IHN1bU1hdGVyaWFsQW1vdW50UHJpY2UoY2FsY3VsYXRlSFFVcGdyYWRlTWF0ZXJpYWxzKDAsIHgpKSksXG4pO1xuXG5jb25zdCBocUFzc2lnbmVkSXRlbXMgPSBjb21wdXRlZCgoKSA9PlxuICBtYXAoW2NvbXBhbnlTdG9yZS52YWx1ZV0sIHggPT4gc3VtTWF0ZXJpYWxBbW91bnRQcmljZSh4LmhlYWRxdWFydGVycy5pbnZlbnRvcnkuaXRlbXMpKSxcbik7XG5cbmNvbnN0IGhxVXBncmFkZXMgPSBjb21wdXRlZCgoKSA9PiBtYXAoW2hxQnVpbHRMZXZlbHMudmFsdWUsIGhxQXNzaWduZWRJdGVtcy52YWx1ZV0sIHN1bSkpO1xuXG5jb25zdCBhcmMgPSBjb21wdXRlZCgoKSA9PiBjb21wYW55U3RvcmUudmFsdWU/LnJlcHJlc2VudGF0aW9uLmNvbnRyaWJ1dGVkVG90YWwuYW1vdW50KTtcblxuY29uc3QgYWNjb3VudHNSZWNlaXZhYmxlID0gY29tcHV0ZWQoKCkgPT4gc3VtQWNjb3VudHNQYXlhYmxlKHBhcnRuZXJOb25DdXJyZW50Q29uZGl0aW9ucykpO1xuXG5jb25zdCBsb25nVGVybUxvYW5zID0gY29tcHV0ZWQoKCkgPT4gc3VtTG9hblJlcGF5bWVudHMocGFydG5lck5vbkN1cnJlbnRDb25kaXRpb25zKSk7XG5cbmNvbnN0IG1hdGVyaWFsc0luVHJhbnNpdCA9IGNvbXB1dGVkKCgpID0+IHN1bVNoaXBtZW50RGVsaXZlcmllcyhwYXJ0bmVyTm9uQ3VycmVudENvbmRpdGlvbnMpKTtcblxuY29uc3QgbWF0ZXJpYWxzUmVjZWl2YWJsZSA9IGNvbXB1dGVkKCgpID0+XG4gIHN1bShzdW1EZWxpdmVyaWVzKHBhcnRuZXJOb25DdXJyZW50Q29uZGl0aW9ucyksIHN1bU1hdGVyaWFsc1BpY2t1cChzZWxmTm9uQ3VycmVudENvbmRpdGlvbnMpKSxcbik7XG5cbmV4cG9ydCBjb25zdCBub25DdXJyZW50QXNzZXRzID0ge1xuICBidWlsZGluZ3MsXG4gIGJ1aWxkaW5nc05ldFZhbHVlQnlMb2NhdGlvbixcbiAgc2hpcHNNYXJrZXRWYWx1ZSxcbiAgc2hpcHNEZXByZWNpYXRpb24sXG4gIGFjY291bnRzUmVjZWl2YWJsZSxcbiAgbWF0ZXJpYWxzSW5UcmFuc2l0LFxuICBtYXRlcmlhbHNSZWNlaXZhYmxlLFxuICBsb25nVGVybUxvYW5zLFxuICBocVVwZ3JhZGVzLFxuICBhcmMsXG59O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQW9CQSxNQUFBLGFBQUEsU0FBQSxNQUFBO0FBQ0Usa0JBQUEsUUFBQTtBQUNBLFNBQUEsTUFBQSxXQUFBLElBQUEsT0FBQSxrQkFBQTtBQUNGLENBQUE7QUFFQSxTQUFBLG1CQUFBLE1BQUE7QUFDRSxRQUFBLFlBQUEsZ0JBQUEsZUFBQSxLQUFBLGtCQUFBO0FBQ0EsU0FBQSx1QkFBQSxXQUFBLGVBQUEsVUFBQTtBQUNGO0FBRUEsTUFBQSxlQUFBO0FBQUEsRUFBcUIsTUFBQTtBQUFBLElBQ25CLHNCQUFBLElBQUEsT0FBQSxPQUFBLENBQUEsTUFBQSxFQUFBLFdBQUEsU0FBQTtBQUFBLElBQ3FFLENBQUEsTUFBQSx1QkFBQSxFQUFBLFVBQUEsS0FBQTtBQUFBLEVBQ3RCO0FBRWpEO0FBRUEsTUFBQSxtQkFBQSxTQUFBLE1BQUEsSUFBQSxXQUFBLE9BQUEsYUFBQSxLQUFBLENBQUE7QUFFQSxNQUFBLG9CQUFBLFNBQUEsTUFBQTtBQUNFLFNBQUEsTUFBQSxXQUFBLElBQUEsT0FBQSxDQUFBLE1BQUEsdUJBQUEsRUFBQSxlQUFBLENBQUE7QUFDRixDQUFBO0FBRUEsTUFBQSxVQUFBLFNBQUEsTUFBQSxJQUFBLENBQUEsYUFBQSxLQUFBLEdBQUEsQ0FBQSxNQUFBLEVBQUEsYUFBQSxLQUFBLENBQUE7QUFFQSxNQUFBLGdCQUFBO0FBQUEsRUFBc0IsTUFBQSxJQUFBLENBQUEsUUFBQSxLQUFBLEdBQUEsQ0FBQSxNQUFBLHVCQUFBLDRCQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7QUFFdEI7QUFFQSxNQUFBLGtCQUFBO0FBQUEsRUFBd0IsTUFBQSxJQUFBLENBQUEsYUFBQSxLQUFBLEdBQUEsQ0FBQSxNQUFBLHVCQUFBLEVBQUEsYUFBQSxVQUFBLEtBQUEsQ0FBQTtBQUV4QjtBQUVBLE1BQUEsYUFBQSxTQUFBLE1BQUEsSUFBQSxDQUFBLGNBQUEsT0FBQSxnQkFBQSxLQUFBLEdBQUEsR0FBQSxDQUFBO0FBRUEsTUFBQSxNQUFBLFNBQUEsTUFBQSxhQUFBLE9BQUEsZUFBQSxpQkFBQSxNQUFBO0FBRUEsTUFBQSxxQkFBQSxTQUFBLE1BQUEsbUJBQUEsMkJBQUEsQ0FBQTtBQUVBLE1BQUEsZ0JBQUEsU0FBQSxNQUFBLGtCQUFBLDJCQUFBLENBQUE7QUFFQSxNQUFBLHFCQUFBLFNBQUEsTUFBQSxzQkFBQSwyQkFBQSxDQUFBO0FBRUEsTUFBQSxzQkFBQTtBQUFBLEVBQTRCLE1BQUEsSUFBQSxjQUFBLDJCQUFBLEdBQUEsbUJBQUEsd0JBQUEsQ0FBQTtBQUU1QjtBQUVPLE1BQUEsbUJBQUE7QUFBQSxFQUF5QjtBQUFBLEVBQzlCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFFRjsifQ==
