import { createEntityStore } from './create-entity-store.js';
import { onApiMessage } from './api-messages.js';
import { createMapGetter } from './create-map-getter.js';
import { getEntityNaturalIdFromAddress, getEntityNameFromAddress } from './addresses.js';
const store = createEntityStore(x => x.warehouseId);
const state = store.state;
onApiMessage({
  WAREHOUSE_STORAGES(data) {
    store.setAll(data.storages);
    store.setFetched();
  },
  WAREHOUSE_STORAGE(data) {
    store.setOne(data);
  },
  WAREHOUSE_STORAGE_REMOVED(data) {
    store.removeOne(data.warehouseId);
  },
});
const getByEntityNaturalId = createMapGetter(state.all, x =>
  getEntityNaturalIdFromAddress(x.address),
);
const getByEntityName = createMapGetter(state.all, x => getEntityNameFromAddress(x.address));
const getByEntityNaturalIdOrName = value => getByEntityNaturalId(value) ?? getByEntityName(value);
const warehousesStore = {
  ...state,
  getByEntityNaturalId,
  getByEntityName,
  getByEntityNaturalIdOrName,
};
export { warehousesStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FyZWhvdXNlcy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvd2FyZWhvdXNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbnRpdHlTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9jcmVhdGUtZW50aXR5LXN0b3JlJztcbmltcG9ydCB7IG9uQXBpTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgY3JlYXRlTWFwR2V0dGVyIH0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL2NyZWF0ZS1tYXAtZ2V0dGVyJztcbmltcG9ydCB7XG4gIGdldEVudGl0eU5hbWVGcm9tQWRkcmVzcyxcbiAgZ2V0RW50aXR5TmF0dXJhbElkRnJvbUFkZHJlc3MsXG59IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hZGRyZXNzZXMnO1xuXG5jb25zdCBzdG9yZSA9IGNyZWF0ZUVudGl0eVN0b3JlPFBydW5BcGkuV2FyZWhvdXNlPih4ID0+IHgud2FyZWhvdXNlSWQpO1xuY29uc3Qgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcblxub25BcGlNZXNzYWdlKHtcbiAgV0FSRUhPVVNFX1NUT1JBR0VTKGRhdGE6IHsgc3RvcmFnZXM6IFBydW5BcGkuV2FyZWhvdXNlW10gfSkge1xuICAgIHN0b3JlLnNldEFsbChkYXRhLnN0b3JhZ2VzKTtcbiAgICBzdG9yZS5zZXRGZXRjaGVkKCk7XG4gIH0sXG4gIFdBUkVIT1VTRV9TVE9SQUdFKGRhdGE6IFBydW5BcGkuV2FyZWhvdXNlKSB7XG4gICAgc3RvcmUuc2V0T25lKGRhdGEpO1xuICB9LFxuICBXQVJFSE9VU0VfU1RPUkFHRV9SRU1PVkVEKGRhdGE6IHsgd2FyZWhvdXNlSWQ6IHN0cmluZyB9KSB7XG4gICAgc3RvcmUucmVtb3ZlT25lKGRhdGEud2FyZWhvdXNlSWQpO1xuICB9LFxufSk7XG5cbmNvbnN0IGdldEJ5RW50aXR5TmF0dXJhbElkID0gY3JlYXRlTWFwR2V0dGVyKFxuICBzdGF0ZS5hbGwsXG4gIHggPT4gZ2V0RW50aXR5TmF0dXJhbElkRnJvbUFkZHJlc3MoeC5hZGRyZXNzKSEsXG4pO1xuXG5jb25zdCBnZXRCeUVudGl0eU5hbWUgPSBjcmVhdGVNYXBHZXR0ZXIoc3RhdGUuYWxsLCB4ID0+IGdldEVudGl0eU5hbWVGcm9tQWRkcmVzcyh4LmFkZHJlc3MpISk7XG5cbmNvbnN0IGdldEJ5RW50aXR5TmF0dXJhbElkT3JOYW1lID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT5cbiAgZ2V0QnlFbnRpdHlOYXR1cmFsSWQodmFsdWUpID8/IGdldEJ5RW50aXR5TmFtZSh2YWx1ZSk7XG5cbmV4cG9ydCBjb25zdCB3YXJlaG91c2VzU3RvcmUgPSB7XG4gIC4uLnN0YXRlLFxuICBnZXRCeUVudGl0eU5hdHVyYWxJZCxcbiAgZ2V0QnlFbnRpdHlOYW1lLFxuICBnZXRCeUVudGl0eU5hdHVyYWxJZE9yTmFtZSxcbn07XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQVFBLE1BQU0sUUFBUSxrQkFBcUMsQ0FBQSxNQUFLLEVBQUUsV0FBVztBQUNyRSxNQUFNLFFBQVEsTUFBTTtBQUVwQixhQUFhO0FBQUEsRUFDWCxtQkFBbUIsTUFBeUM7QUFDMUQsVUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixVQUFNLFdBQUE7QUFBQSxFQUNSO0FBQUEsRUFDQSxrQkFBa0IsTUFBeUI7QUFDekMsVUFBTSxPQUFPLElBQUk7QUFBQSxFQUNuQjtBQUFBLEVBQ0EsMEJBQTBCLE1BQStCO0FBQ3ZELFVBQU0sVUFBVSxLQUFLLFdBQVc7QUFBQSxFQUNsQztBQUNGLENBQUM7QUFFRCxNQUFNLHVCQUF1QjtBQUFBLEVBQzNCLE1BQU07QUFBQSxFQUNOLENBQUEsTUFBSyw4QkFBOEIsRUFBRSxPQUFPO0FBQzlDO0FBRUEsTUFBTSxrQkFBa0IsZ0JBQWdCLE1BQU0sS0FBSyxPQUFLLHlCQUF5QixFQUFFLE9BQU8sQ0FBRTtBQUU1RixNQUFNLDZCQUE2QixDQUFDLFVBQ2xDLHFCQUFxQixLQUFLLEtBQUssZ0JBQWdCLEtBQUs7QUFFL0MsTUFBTSxrQkFBa0I7QUFBQSxFQUM3QixHQUFHO0FBQUEsRUFDSDtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7In0=
