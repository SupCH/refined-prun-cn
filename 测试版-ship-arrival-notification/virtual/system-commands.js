import { starsStore, getStarNaturalId } from './stars.js';
import { convertToPlanetNaturalId } from './planet-natural-id.js';
import { exchangesStore } from './exchanges.js';
import { getSystemLineFromAddress } from './addresses.js';
const correctableCommands = /* @__PURE__ */ new Set(['FLTS', 'INF', 'MS', 'SYSI']);
function correctSystemCommand(parts) {
  if (!correctableCommands.has(parts[0].toUpperCase())) {
    return;
  }
  const args = parts.slice(1);
  const argsJoined = args.join(' ');
  let star = starsStore.getByName(argsJoined);
  if (!star) {
    const planetNaturalId = convertToPlanetNaturalId(argsJoined, args);
    star = starsStore.getByPlanetNaturalId(planetNaturalId);
  }
  if (!star) {
    const exchange = exchangesStore.getByNaturalId(argsJoined);
    const systemLine = getSystemLineFromAddress(exchange?.address);
    star = starsStore.getByNaturalId(systemLine?.entity.naturalId);
  }
  if (!star) {
    return;
  }
  const naturalId = getStarNaturalId(star);
  if (argsJoined !== naturalId) {
    parts.splice(1);
    parts.push(naturalId);
  }
}
export { correctSystemCommand };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLWNvbW1hbmRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZmVhdHVyZXMvYmFzaWMvY29ycmVjdC1jb21tYW5kcy9zeXN0ZW0tY29tbWFuZHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U3Rhck5hdHVyYWxJZCwgc3RhcnNTdG9yZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9zdGFycyc7XG5pbXBvcnQgeyBjb252ZXJ0VG9QbGFuZXROYXR1cmFsSWQgfSBmcm9tICdAc3JjL2NvcmUvcGxhbmV0LW5hdHVyYWwtaWQnO1xuaW1wb3J0IHsgZXhjaGFuZ2VzU3RvcmUgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvZXhjaGFuZ2VzJztcbmltcG9ydCB7IGdldFN5c3RlbUxpbmVGcm9tQWRkcmVzcyB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hZGRyZXNzZXMnO1xuXG5jb25zdCBjb3JyZWN0YWJsZUNvbW1hbmRzID0gbmV3IFNldChbJ0ZMVFMnLCAnSU5GJywgJ01TJywgJ1NZU0knXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb3JyZWN0U3lzdGVtQ29tbWFuZChwYXJ0czogc3RyaW5nW10pIHtcbiAgaWYgKCFjb3JyZWN0YWJsZUNvbW1hbmRzLmhhcyhwYXJ0c1swXS50b1VwcGVyQ2FzZSgpKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGFyZ3MgPSBwYXJ0cy5zbGljZSgxKTtcbiAgY29uc3QgYXJnc0pvaW5lZCA9IGFyZ3Muam9pbignICcpO1xuICBsZXQgc3RhciA9IHN0YXJzU3RvcmUuZ2V0QnlOYW1lKGFyZ3NKb2luZWQpO1xuXG4gIGlmICghc3Rhcikge1xuICAgIGNvbnN0IHBsYW5ldE5hdHVyYWxJZCA9IGNvbnZlcnRUb1BsYW5ldE5hdHVyYWxJZChhcmdzSm9pbmVkLCBhcmdzKTtcbiAgICBzdGFyID0gc3RhcnNTdG9yZS5nZXRCeVBsYW5ldE5hdHVyYWxJZChwbGFuZXROYXR1cmFsSWQpO1xuICB9XG5cbiAgaWYgKCFzdGFyKSB7XG4gICAgY29uc3QgZXhjaGFuZ2UgPSBleGNoYW5nZXNTdG9yZS5nZXRCeU5hdHVyYWxJZChhcmdzSm9pbmVkKTtcbiAgICBjb25zdCBzeXN0ZW1MaW5lID0gZ2V0U3lzdGVtTGluZUZyb21BZGRyZXNzKGV4Y2hhbmdlPy5hZGRyZXNzKTtcbiAgICBzdGFyID0gc3RhcnNTdG9yZS5nZXRCeU5hdHVyYWxJZChzeXN0ZW1MaW5lPy5lbnRpdHkubmF0dXJhbElkKTtcbiAgfVxuXG4gIGlmICghc3Rhcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IG5hdHVyYWxJZCA9IGdldFN0YXJOYXR1cmFsSWQoc3Rhcik7XG4gIGlmIChhcmdzSm9pbmVkICE9PSBuYXR1cmFsSWQpIHtcbiAgICBwYXJ0cy5zcGxpY2UoMSk7XG4gICAgcGFydHMucHVzaChuYXR1cmFsSWQpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUtBLE1BQU0sMENBQTBCLElBQUksQ0FBQyxRQUFRLE9BQU8sTUFBTSxNQUFNLENBQUM7QUFFMUQsU0FBUyxxQkFBcUIsT0FBaUI7QUFDcEQsTUFBSSxDQUFDLG9CQUFvQixJQUFJLE1BQU0sQ0FBQyxFQUFFLFlBQUEsQ0FBYSxHQUFHO0FBQ3BEO0FBQUEsRUFDRjtBQUVBLFFBQU0sT0FBTyxNQUFNLE1BQU0sQ0FBQztBQUMxQixRQUFNLGFBQWEsS0FBSyxLQUFLLEdBQUc7QUFDaEMsTUFBSSxPQUFPLFdBQVcsVUFBVSxVQUFVO0FBRTFDLE1BQUksQ0FBQyxNQUFNO0FBQ1QsVUFBTSxrQkFBa0IseUJBQXlCLFlBQVksSUFBSTtBQUNqRSxXQUFPLFdBQVcscUJBQXFCLGVBQWU7QUFBQSxFQUN4RDtBQUVBLE1BQUksQ0FBQyxNQUFNO0FBQ1QsVUFBTSxXQUFXLGVBQWUsZUFBZSxVQUFVO0FBQ3pELFVBQU0sYUFBYSx5QkFBeUIsVUFBVSxPQUFPO0FBQzdELFdBQU8sV0FBVyxlQUFlLFlBQVksT0FBTyxTQUFTO0FBQUEsRUFDL0Q7QUFFQSxNQUFJLENBQUMsTUFBTTtBQUNUO0FBQUEsRUFDRjtBQUVBLFFBQU0sWUFBWSxpQkFBaUIsSUFBSTtBQUN2QyxNQUFJLGVBQWUsV0FBVztBQUM1QixVQUFNLE9BQU8sQ0FBQztBQUNkLFVBQU0sS0FBSyxTQUFTO0FBQUEsRUFDdEI7QUFDRjsifQ==
