import { decodePayload, encodePayload } from './index12.js';
import { PacketType, Decoder, Encoder } from './index13.js';
import { castArray } from './cast-array.js';
function socketIOMiddleware(middleware) {
  const addEventListener = WebSocket.prototype.addEventListener;
  window.WebSocket = new Proxy(WebSocket, {
    construct(target, args) {
      const ws = new target(...args);
      return new Proxy(ws, {
        set(target2, prop, value) {
          if (prop === 'onmessage') {
            middleware.dispatchClientMessage.value = message => {
              value(new MessageEvent('message', { data: encodeMessage(message) }));
            };
            target2.onmessage = e => {
              const data = processMessage(e.data, middleware);
              if (data !== e.data) {
                e = new Proxy(e, {
                  get(target3, prop2) {
                    if (prop2 === 'data') {
                      return data;
                    }
                    return Reflect.get(target3, prop2);
                  },
                });
              }
              value(e);
            };
            return true;
          }
          return Reflect.set(target2, prop, value);
        },
        get(target2, prop) {
          if (prop === 'addEventListener') {
            return addEventListener.bind(target2);
          }
          const value = Reflect.get(target2, prop);
          if (typeof value === 'function') {
            return value.bind(target2);
          }
          return value;
        },
      });
    },
  });
  WebSocket.prototype.addEventListener = function (type, listener, options) {
    return this.addEventListener(type, listener, options);
  };
  window.XMLHttpRequest = new Proxy(XMLHttpRequest, {
    construct(target) {
      const xhr = new target();
      let data = '';
      return new Proxy(xhr, {
        get(target2, prop) {
          if (prop === 'responseText' && data) {
            return data;
          }
          const value = Reflect.get(target2, prop);
          if (typeof value === 'function') {
            return value.bind(target2);
          }
          return value;
        },
        set(target2, prop, value) {
          if (prop === 'onreadystatechange') {
            target2.onreadystatechange = () => {
              if (target2.readyState === 4 && target2.status === 200) {
                data = processMessage(target2.responseText, middleware);
              }
              value();
            };
            return true;
          }
          return Reflect.set(target2, prop, value);
        },
      });
    },
  });
}
function processMessage(data, middleware) {
  const engineIOPackets = decodePayload(data);
  let rewriteMessage = false;
  for (const engineIOPacket of engineIOPackets) {
    if (engineIOPacket.type !== 'message') {
      continue;
    }
    const decoder = new Decoder();
    decoder.on('decoded', decodedPacket => {
      const data2 = decodedPacket.data;
      if (decodedPacket.type === 0) {
        try {
          middleware.onOpen();
        } catch (error) {
          console.error(error);
        }
        return;
      }
      const payload = data2[1];
      if (decodedPacket.type !== 2 || data2[0] !== 'event' || payload === void 0) {
        return;
      }
      let rewrite;
      try {
        rewrite = middleware.onMessage(payload);
      } catch (error) {
        console.error(error);
        rewrite = false;
      }
      if (rewrite) {
        engineIOPacket.data = encodeSIOPacket(decodedPacket);
        rewriteMessage = true;
      }
    });
    decoder.add(engineIOPacket.data);
  }
  return rewriteMessage ? encodeEIOPacket(engineIOPackets) : data;
}
function encodeMessage(message) {
  return encodeEIOPacket({
    type: 'message',
    data: encodeSIOPacket({
      type: PacketType.EVENT,
      nsp: '/',
      data: ['event', message],
    }),
  });
}
function encodeSIOPacket(packet) {
  const encoder = new Encoder();
  return encoder.encode(packet)[0];
}
function encodeEIOPacket(packet) {
  let data;
  encodePayload(castArray(packet), newData => {
    data = newData;
  });
  return data;
}
export { socketIOMiddleware as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ja2V0LWlvLW1pZGRsZXdhcmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9zb2NrZXQtaW8tbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGVQYXlsb2FkLCBlbmNvZGVQYXlsb2FkLCBQYWNrZXQgYXMgRUlPUGFja2V0IH0gZnJvbSAnZW5naW5lLmlvLXBhcnNlcic7XG5pbXBvcnQgeyBEZWNvZGVyLCBFbmNvZGVyLCBQYWNrZXQgYXMgU0lPUGFja2V0LCBQYWNrZXRUeXBlIH0gZnJvbSAnc29ja2V0LmlvLXBhcnNlcic7XG5pbXBvcnQgeyBjYXN0QXJyYXkgfSBmcm9tICdAc3JjL3V0aWxzL2Nhc3QtYXJyYXknO1xuXG5leHBvcnQgdHlwZSBNaWRkbGV3YXJlPFQ+ID0ge1xuICBvbk9wZW46ICgpID0+IHZvaWQ7XG4gIG9uTWVzc2FnZTogKHBheWxvYWQ6IFQpID0+IGJvb2xlYW47XG4gIGRpc3BhdGNoQ2xpZW50TWVzc2FnZTogUmVmPCgocGF5bG9hZDogVCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc29ja2V0SU9NaWRkbGV3YXJlPFQ+KG1pZGRsZXdhcmU6IE1pZGRsZXdhcmU8VD4pIHtcbiAgY29uc3QgYWRkRXZlbnRMaXN0ZW5lciA9IFdlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcbiAgd2luZG93LldlYlNvY2tldCA9IG5ldyBQcm94eShXZWJTb2NrZXQsIHtcbiAgICBjb25zdHJ1Y3QodGFyZ2V0OiB0eXBlb2YgV2ViU29ja2V0LCBhcmdzOiBbc3RyaW5nLCAoc3RyaW5nIHwgc3RyaW5nW10pP10pIHtcbiAgICAgIGNvbnN0IHdzID0gbmV3IHRhcmdldCguLi5hcmdzKTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm94eSh3cywge1xuICAgICAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSAnb25tZXNzYWdlJykge1xuICAgICAgICAgICAgbWlkZGxld2FyZS5kaXNwYXRjaENsaWVudE1lc3NhZ2UudmFsdWUgPSBtZXNzYWdlID0+IHtcbiAgICAgICAgICAgICAgdmFsdWUobmV3IE1lc3NhZ2VFdmVudCgnbWVzc2FnZScsIHsgZGF0YTogZW5jb2RlTWVzc2FnZShtZXNzYWdlKSB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGFyZ2V0Lm9ubWVzc2FnZSA9IGUgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcHJvY2Vzc01lc3NhZ2UoZS5kYXRhLCBtaWRkbGV3YXJlKTtcbiAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IGUuZGF0YSkge1xuICAgICAgICAgICAgICAgIGUgPSBuZXcgUHJveHkoZSwge1xuICAgICAgICAgICAgICAgICAgZ2V0KHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RhdGEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhbHVlKGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gJ2FkZEV2ZW50TGlzdGVuZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkRXZlbnRMaXN0ZW5lci5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuYmluZCh0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBJIGRvbid0IHJlbWVtYmVyIHdoYXQgdGhpcyBvdmVycmlkZSBpcyBmb3IsIGxvbC4gUHJvYmFibHkgc29tZSBGSU8gY29tcGF0aWJpbGl0eSBpc3N1ZXMuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIFdlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlOiBhbnksIGxpc3RlbmVyOiBhbnksIG9wdGlvbnM6IGFueSkge1xuICAgIHJldHVybiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICB9O1xuXG4gIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA9IG5ldyBQcm94eShYTUxIdHRwUmVxdWVzdCwge1xuICAgIGNvbnN0cnVjdCh0YXJnZXQ6IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgY29uc3QgeGhyID0gbmV3IHRhcmdldCgpO1xuICAgICAgbGV0IGRhdGEgPSAnJztcblxuICAgICAgcmV0dXJuIG5ldyBQcm94eSh4aHIsIHtcbiAgICAgICAgZ2V0KHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgIGlmIChwcm9wID09PSAncmVzcG9uc2VUZXh0JyAmJiBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3ApO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gJ29ucmVhZHlzdGF0ZWNoYW5nZScpIHtcbiAgICAgICAgICAgIHRhcmdldC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXQucmVhZHlTdGF0ZSA9PT0gNCAmJiB0YXJnZXQuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gcHJvY2Vzc01lc3NhZ2UodGFyZ2V0LnJlc3BvbnNlVGV4dCwgbWlkZGxld2FyZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFsdWUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNZXNzYWdlPFQ+KGRhdGE6IHN0cmluZywgbWlkZGxld2FyZTogTWlkZGxld2FyZTxUPikge1xuICBjb25zdCBlbmdpbmVJT1BhY2tldHMgPSBkZWNvZGVQYXlsb2FkKGRhdGEpO1xuICBsZXQgcmV3cml0ZU1lc3NhZ2UgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBlbmdpbmVJT1BhY2tldCBvZiBlbmdpbmVJT1BhY2tldHMpIHtcbiAgICBpZiAoZW5naW5lSU9QYWNrZXQudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBEZWNvZGVyKCk7XG4gICAgZGVjb2Rlci5vbignZGVjb2RlZCcsIGRlY29kZWRQYWNrZXQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRlY29kZWRQYWNrZXQuZGF0YTtcbiAgICAgIGlmIChkZWNvZGVkUGFja2V0LnR5cGUgPT09IDApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtaWRkbGV3YXJlLm9uT3BlbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBheWxvYWQgPSBkYXRhWzFdO1xuICAgICAgaWYgKGRlY29kZWRQYWNrZXQudHlwZSAhPT0gMiB8fCBkYXRhWzBdICE9PSAnZXZlbnQnIHx8IHBheWxvYWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCByZXdyaXRlOiBib29sZWFuO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV3cml0ZSA9IG1pZGRsZXdhcmUub25NZXNzYWdlKHBheWxvYWQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJld3JpdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXdyaXRlKSB7XG4gICAgICAgIGVuZ2luZUlPUGFja2V0LmRhdGEgPSBlbmNvZGVTSU9QYWNrZXQoZGVjb2RlZFBhY2tldCk7XG4gICAgICAgIHJld3JpdGVNZXNzYWdlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkZWNvZGVyLmFkZChlbmdpbmVJT1BhY2tldC5kYXRhKTtcbiAgfVxuICByZXR1cm4gcmV3cml0ZU1lc3NhZ2UgPyBlbmNvZGVFSU9QYWNrZXQoZW5naW5lSU9QYWNrZXRzKSA6IGRhdGE7XG59XG5cbmZ1bmN0aW9uIGVuY29kZU1lc3NhZ2U8VD4obWVzc2FnZTogVCkge1xuICByZXR1cm4gZW5jb2RlRUlPUGFja2V0KHtcbiAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgZGF0YTogZW5jb2RlU0lPUGFja2V0KHtcbiAgICAgIHR5cGU6IFBhY2tldFR5cGUuRVZFTlQsXG4gICAgICBuc3A6ICcvJyxcbiAgICAgIGRhdGE6IFsnZXZlbnQnLCBtZXNzYWdlXSxcbiAgICB9KSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVuY29kZVNJT1BhY2tldChwYWNrZXQ6IFNJT1BhY2tldCkge1xuICBjb25zdCBlbmNvZGVyID0gbmV3IEVuY29kZXIoKTtcbiAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKHBhY2tldClbMF07XG59XG5cbmZ1bmN0aW9uIGVuY29kZUVJT1BhY2tldChwYWNrZXQ6IEFycmF5YWJsZTxFSU9QYWNrZXQ+KSB7XG4gIGxldCBkYXRhOiBzdHJpbmc7XG4gIGVuY29kZVBheWxvYWQoY2FzdEFycmF5KHBhY2tldCksIG5ld0RhdGEgPT4ge1xuICAgIGRhdGEgPSBuZXdEYXRhO1xuICB9KTtcbiAgcmV0dXJuIGRhdGEhO1xufVxuIl0sIm5hbWVzIjpbInRhcmdldCIsInByb3AiLCJkYXRhIl0sIm1hcHBpbmdzIjoiOzs7QUFVQSxTQUF3QixtQkFBc0IsWUFBMkI7QUFDdkUsUUFBTSxtQkFBbUIsVUFBVSxVQUFVO0FBQzdDLFNBQU8sWUFBWSxJQUFJLE1BQU0sV0FBVztBQUFBLElBQ3RDLFVBQVUsUUFBMEIsTUFBc0M7QUFDeEUsWUFBTSxLQUFLLElBQUksT0FBTyxHQUFHLElBQUk7QUFFN0IsYUFBTyxJQUFJLE1BQU0sSUFBSTtBQUFBLFFBQ25CLElBQUlBLFNBQVEsTUFBTSxPQUFPO0FBQ3ZCLGNBQUksU0FBUyxhQUFhO0FBQ3hCLHVCQUFXLHNCQUFzQixRQUFRLENBQUEsWUFBVztBQUNsRCxvQkFBTSxJQUFJLGFBQWEsV0FBVyxFQUFFLE1BQU0sY0FBYyxPQUFPLEVBQUEsQ0FBRyxDQUFDO0FBQUEsWUFDckU7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
