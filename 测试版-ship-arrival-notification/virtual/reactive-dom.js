import { ref } from './reactivity.esm-bundler.js';
function refTextContent(element) {
  const textContent = ref(element.textContent);
  const observer = new MutationObserver(() => (textContent.value = element.textContent));
  observer.observe(element, { childList: true, subtree: true, characterData: true });
  return textContent;
}
function refValue(element) {
  return refAnimationFrame(element, x => x.value);
}
function refAttributeValue(element, name) {
  const value = ref(element.getAttribute(name));
  const observer = new MutationObserver(() => (value.value = element.getAttribute(name)));
  observer.observe(element, { attributes: true });
  return value;
}
let animationFrameUpdates = [];
function refAnimationFrame(element, getter) {
  const value = ref(getter(element));
  animationFrameUpdates.push(() => {
    if (element.isConnected) {
      value.value = getter(element);
      return true;
    }
    return false;
  });
  if (animationFrameUpdates.length === 1) {
    runAnimationFrameUpdates();
  }
  return value;
}
function runAnimationFrameUpdates() {
  const next = [];
  for (const update of animationFrameUpdates) {
    if (update()) {
      next.push(update);
    }
  }
  animationFrameUpdates = next;
  if (animationFrameUpdates.length > 0) {
    requestAnimationFrame(runAnimationFrameUpdates);
  }
}
runAnimationFrameUpdates();
export { refAnimationFrame, refAttributeValue, refTextContent, refValue };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3RpdmUtZG9tLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbHMvcmVhY3RpdmUtZG9tLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiByZWZUZXh0Q29udGVudChlbGVtZW50OiBOb2RlKSB7XG4gIGNvbnN0IHRleHRDb250ZW50ID0gcmVmKGVsZW1lbnQudGV4dENvbnRlbnQpO1xuICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+ICh0ZXh0Q29udGVudC52YWx1ZSA9IGVsZW1lbnQudGV4dENvbnRlbnQpKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcbiAgcmV0dXJuIHRleHRDb250ZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVmVmFsdWU8VCBleHRlbmRzIHN0cmluZyB8IG51bWJlcj4oZWxlbWVudDogTm9kZSAmIHsgdmFsdWU6IFQgfSkge1xuICByZXR1cm4gcmVmQW5pbWF0aW9uRnJhbWUoZWxlbWVudCwgeCA9PiB4LnZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZkF0dHJpYnV0ZVZhbHVlKGVsZW1lbnQ6IEVsZW1lbnQsIG5hbWU6IHN0cmluZykge1xuICBjb25zdCB2YWx1ZSA9IHJlZihlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKSk7XG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gKHZhbHVlLnZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSkpKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxubGV0IGFuaW1hdGlvbkZyYW1lVXBkYXRlczogKCgpID0+IGJvb2xlYW4pW10gPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZkFuaW1hdGlvbkZyYW1lPFQgZXh0ZW5kcyBOb2RlLCBLPihlbGVtZW50OiBULCBnZXR0ZXI6ICh4OiBUKSA9PiBLKSB7XG4gIGNvbnN0IHZhbHVlID0gcmVmKGdldHRlcihlbGVtZW50KSk7XG4gIGFuaW1hdGlvbkZyYW1lVXBkYXRlcy5wdXNoKCgpID0+IHtcbiAgICBpZiAoZWxlbWVudC5pc0Nvbm5lY3RlZCkge1xuICAgICAgKHZhbHVlIGFzIFJlZjxLPikudmFsdWUgPSBnZXR0ZXIoZWxlbWVudCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgaWYgKGFuaW1hdGlvbkZyYW1lVXBkYXRlcy5sZW5ndGggPT09IDEpIHtcbiAgICBydW5BbmltYXRpb25GcmFtZVVwZGF0ZXMoKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHJ1bkFuaW1hdGlvbkZyYW1lVXBkYXRlcygpIHtcbiAgY29uc3QgbmV4dDogdHlwZW9mIGFuaW1hdGlvbkZyYW1lVXBkYXRlcyA9IFtdO1xuICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiBhbmltYXRpb25GcmFtZVVwZGF0ZXMpIHtcbiAgICBpZiAodXBkYXRlKCkpIHtcbiAgICAgIG5leHQucHVzaCh1cGRhdGUpO1xuICAgIH1cbiAgfVxuICBhbmltYXRpb25GcmFtZVVwZGF0ZXMgPSBuZXh0O1xuICBpZiAoYW5pbWF0aW9uRnJhbWVVcGRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocnVuQW5pbWF0aW9uRnJhbWVVcGRhdGVzKTtcbiAgfVxufVxuXG5ydW5BbmltYXRpb25GcmFtZVVwZGF0ZXMoKTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQU8sU0FBQSxlQUFBLFNBQUE7QUFDTCxRQUFBLGNBQUEsSUFBQSxRQUFBLFdBQUE7QUFDQSxRQUFBLFdBQUEsSUFBQSxpQkFBQSxNQUFBLFlBQUEsUUFBQSxRQUFBLFdBQUE7QUFDQSxXQUFBLFFBQUEsU0FBQSxFQUFBLFdBQUEsTUFBQSxTQUFBLE1BQUEsZUFBQSxNQUFBO0FBQ0EsU0FBQTtBQUNGO0FBRU8sU0FBQSxTQUFBLFNBQUE7QUFDTCxTQUFBLGtCQUFBLFNBQUEsQ0FBQSxNQUFBLEVBQUEsS0FBQTtBQUNGO0FBRU8sU0FBQSxrQkFBQSxTQUFBLE1BQUE7QUFDTCxRQUFBLFFBQUEsSUFBQSxRQUFBLGFBQUEsSUFBQSxDQUFBO0FBQ0EsUUFBQSxXQUFBLElBQUEsaUJBQUEsTUFBQSxNQUFBLFFBQUEsUUFBQSxhQUFBLElBQUEsQ0FBQTtBQUNBLFdBQUEsUUFBQSxTQUFBLEVBQUEsWUFBQSxLQUFBLENBQUE7QUFDQSxTQUFBO0FBQ0Y7QUFFQSxJQUFBLHdCQUFBLENBQUE7QUFFTyxTQUFBLGtCQUFBLFNBQUEsUUFBQTtBQUNMLFFBQUEsUUFBQSxJQUFBLE9BQUEsT0FBQSxDQUFBO0FBQ0Esd0JBQUEsS0FBQSxNQUFBO0FBQ0UsUUFBQSxRQUFBLGFBQUE7QUFDRSxZQUFBLFFBQUEsT0FBQSxPQUFBO0FBQ0EsYUFBQTtBQUFBLElBQU87QUFFVCxXQUFBO0FBQUEsRUFBTyxDQUFBO0FBRVQsTUFBQSxzQkFBQSxXQUFBLEdBQUE7QUFDRSw2QkFBQTtBQUFBLEVBQXlCO0FBRTNCLFNBQUE7QUFDRjtBQUVBLFNBQUEsMkJBQUE7QUFDRSxRQUFBLE9BQUEsQ0FBQTtBQUNBLGFBQUEsVUFBQSx1QkFBQTtBQUNFLFFBQUEsT0FBQSxHQUFBO0FBQ0UsV0FBQSxLQUFBLE1BQUE7QUFBQSxJQUFnQjtBQUFBLEVBQ2xCO0FBRUYsMEJBQUE7QUFDQSxNQUFBLHNCQUFBLFNBQUEsR0FBQTtBQUNFLDBCQUFBLHdCQUFBO0FBQUEsRUFBOEM7QUFFbEQ7QUFFQSx5QkFBQTsifQ==
