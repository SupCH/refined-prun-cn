import { onApiMessage } from './api-messages.js';
import { createEntityStore } from './create-entity-store.js';
import { createMapGetter } from './create-map-getter.js';
const store = createEntityStore();
const state = store.state;
onApiMessage({
  SHIP_SHIPS(data) {
    store.setAll(data.ships);
    store.setFetched();
  },
  SHIP_DATA(data) {
    store.setOne(data);
  },
});
const getByRegistration = createMapGetter(state.all, x => x.registration);
const getByName = createMapGetter(state.all, x => x.name);
const getShipLastRepair = ship =>
  ship.lastRepair ? ship.lastRepair.timestamp : ship.commissioningTime.timestamp;
const shipsStore = {
  ...state,
  getByRegistration,
  getByName,
};
export { getShipLastRepair, shipsStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hpcHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL3NoaXBzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9uQXBpTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgY3JlYXRlRW50aXR5U3RvcmUgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvY3JlYXRlLWVudGl0eS1zdG9yZSc7XG5pbXBvcnQgeyBjcmVhdGVNYXBHZXR0ZXIgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvY3JlYXRlLW1hcC1nZXR0ZXInO1xuXG5jb25zdCBzdG9yZSA9IGNyZWF0ZUVudGl0eVN0b3JlPFBydW5BcGkuU2hpcD4oKTtcbmNvbnN0IHN0YXRlID0gc3RvcmUuc3RhdGU7XG5cbm9uQXBpTWVzc2FnZSh7XG4gIFNISVBfU0hJUFMoZGF0YTogeyBzaGlwczogUHJ1bkFwaS5TaGlwW10gfSkge1xuICAgIHN0b3JlLnNldEFsbChkYXRhLnNoaXBzKTtcbiAgICBzdG9yZS5zZXRGZXRjaGVkKCk7XG4gIH0sXG4gIFNISVBfREFUQShkYXRhOiBQcnVuQXBpLlNoaXApIHtcbiAgICBzdG9yZS5zZXRPbmUoZGF0YSk7XG4gIH0sXG59KTtcblxuY29uc3QgZ2V0QnlSZWdpc3RyYXRpb24gPSBjcmVhdGVNYXBHZXR0ZXIoc3RhdGUuYWxsLCB4ID0+IHgucmVnaXN0cmF0aW9uKTtcblxuY29uc3QgZ2V0QnlOYW1lID0gY3JlYXRlTWFwR2V0dGVyKHN0YXRlLmFsbCwgeCA9PiB4Lm5hbWUpO1xuXG5leHBvcnQgY29uc3QgZ2V0U2hpcExhc3RSZXBhaXIgPSAoc2hpcDogUHJ1bkFwaS5TaGlwKSA9PlxuICBzaGlwLmxhc3RSZXBhaXIgPyBzaGlwLmxhc3RSZXBhaXIudGltZXN0YW1wIDogc2hpcC5jb21taXNzaW9uaW5nVGltZS50aW1lc3RhbXA7XG5cbmV4cG9ydCBjb25zdCBzaGlwc1N0b3JlID0ge1xuICAuLi5zdGF0ZSxcbiAgZ2V0QnlSZWdpc3RyYXRpb24sXG4gIGdldEJ5TmFtZSxcbn07XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBSUEsTUFBTSxRQUFRLGtCQUFBO0FBQ2QsTUFBTSxRQUFRLE1BQU07QUFFcEIsYUFBYTtBQUFBLEVBQ1gsV0FBVyxNQUFpQztBQUMxQyxVQUFNLE9BQU8sS0FBSyxLQUFLO0FBQ3ZCLFVBQU0sV0FBQTtBQUFBLEVBQ1I7QUFBQSxFQUNBLFVBQVUsTUFBb0I7QUFDNUIsVUFBTSxPQUFPLElBQUk7QUFBQSxFQUNuQjtBQUNGLENBQUM7QUFFRCxNQUFNLG9CQUFvQixnQkFBZ0IsTUFBTSxLQUFLLENBQUEsTUFBSyxFQUFFLFlBQVk7QUFFeEUsTUFBTSxZQUFZLGdCQUFnQixNQUFNLEtBQUssQ0FBQSxNQUFLLEVBQUUsSUFBSTtBQUVqRCxNQUFNLG9CQUFvQixDQUFDLFNBQ2hDLEtBQUssYUFBYSxLQUFLLFdBQVcsWUFBWSxLQUFLLGtCQUFrQjtBQUVoRSxNQUFNLGFBQWE7QUFBQSxFQUN4QixHQUFHO0FBQUEsRUFDSDtBQUFBLEVBQ0E7QUFDRjsifQ==
