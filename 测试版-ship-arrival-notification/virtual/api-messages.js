const any = [];
const registry = /* @__PURE__ */ new Map();
function onAnyApiMessage(handler) {
  any.push(handler);
}
function onApiMessage(handlers) {
  for (const type in handlers) {
    let list = registry.get(type);
    if (!list) {
      list = [];
      registry.set(type, list);
    }
    list.push(handlers[type]);
  }
}
function dispatch(message) {
  let changed = false;
  for (const handler of any) {
    const result = handler(message);
    if (result) {
      changed = true;
    }
  }
  const handlers = registry.get(message.type);
  if (handlers) {
    for (const handler of handlers) {
      const result = handler(message.data);
      if (result) {
        changed = true;
      }
    }
  }
  return changed;
}
export { dispatch, onAnyApiMessage, onApiMessage };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLW1lc3NhZ2VzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICB0eXBlOiBzdHJpbmc7XG4gIGRhdGE/OiB1bmtub3duO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudHlwZSBNZXNzYWdlSGFuZGxlciA9IChkYXRhOiBhbnkpID0+IHZvaWQgfCBib29sZWFuO1xuXG50eXBlIE1lc3NhZ2VIYW5kbGVycyA9IHsgW3R5cGU6IHN0cmluZ106IE1lc3NhZ2VIYW5kbGVyIH07XG5cbmNvbnN0IGFueTogTWVzc2FnZUhhbmRsZXJbXSA9IFtdO1xuY29uc3QgcmVnaXN0cnkgPSBuZXcgTWFwPHN0cmluZywgTWVzc2FnZUhhbmRsZXJbXT4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIG9uQW55QXBpTWVzc2FnZShoYW5kbGVyOiBNZXNzYWdlSGFuZGxlcikge1xuICBhbnkucHVzaChoYW5kbGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uQXBpTWVzc2FnZShoYW5kbGVyczogTWVzc2FnZUhhbmRsZXJzKSB7XG4gIGZvciAoY29uc3QgdHlwZSBpbiBoYW5kbGVycykge1xuICAgIGxldCBsaXN0ID0gcmVnaXN0cnkuZ2V0KHR5cGUpO1xuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdO1xuICAgICAgcmVnaXN0cnkuc2V0KHR5cGUsIGxpc3QpO1xuICAgIH1cbiAgICBsaXN0LnB1c2goaGFuZGxlcnNbdHlwZV0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChtZXNzYWdlOiBNZXNzYWdlKSB7XG4gIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gIGZvciAoY29uc3QgaGFuZGxlciBvZiBhbnkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBoYW5kbGVyKG1lc3NhZ2UpO1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBjb25zdCBoYW5kbGVycyA9IHJlZ2lzdHJ5LmdldChtZXNzYWdlLnR5cGUpO1xuICBpZiAoaGFuZGxlcnMpIHtcbiAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZXIobWVzc2FnZS5kYXRhKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGFuZ2VkO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVVBLE1BQU0sTUFBd0IsQ0FBQTtBQUM5QixNQUFNLCtCQUFlLElBQUE7QUFFZCxTQUFTLGdCQUFnQixTQUF5QjtBQUN2RCxNQUFJLEtBQUssT0FBTztBQUNsQjtBQUVPLFNBQVMsYUFBYSxVQUEyQjtBQUN0RCxhQUFXLFFBQVEsVUFBVTtBQUMzQixRQUFJLE9BQU8sU0FBUyxJQUFJLElBQUk7QUFDNUIsUUFBSSxDQUFDLE1BQU07QUFDVCxhQUFPLENBQUE7QUFDUCxlQUFTLElBQUksTUFBTSxJQUFJO0FBQUEsSUFDekI7QUFDQSxTQUFLLEtBQUssU0FBUyxJQUFJLENBQUM7QUFBQSxFQUMxQjtBQUNGO0FBRU8sU0FBUyxTQUFTLFNBQWtCO0FBQ3pDLE1BQUksVUFBVTtBQUNkLGFBQVcsV0FBVyxLQUFLO0FBQ3pCLFVBQU0sU0FBUyxRQUFRLE9BQU87QUFDOUIsUUFBSSxRQUFRO0FBQ1YsZ0JBQVU7QUFBQSxJQUNaO0FBQUEsRUFDRjtBQUNBLFFBQU0sV0FBVyxTQUFTLElBQUksUUFBUSxJQUFJO0FBQzFDLE1BQUksVUFBVTtBQUNaLGVBQVcsV0FBVyxVQUFVO0FBQzlCLFlBQU0sU0FBUyxRQUFRLFFBQVEsSUFBSTtBQUNuQyxVQUFJLFFBQVE7QUFDVixrQkFBVTtBQUFBLE1BQ1o7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNBLFNBQU87QUFDVDsifQ==
