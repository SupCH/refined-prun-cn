import { C } from './prun-css.js';
import tiles from './tiles.js';
import features from './feature-registry.js';
import { UI_WINDOWS_REQUEST_FOCUS } from './client-messages.js';
import { dispatchClientPrunMessage } from './prun-api-listener.js';
async function onTileReady(tile) {
  if (tile.docked) {
    return;
  }
  if (tile.command === 'HQ') {
    return;
  }
  const tileWindow = tile.frame.closest(`.${C.Window.window}`);
  tileWindow?.addEventListener('mousedown', () => {
    const command = UI_WINDOWS_REQUEST_FOCUS(tile.id);
    dispatchClientPrunMessage(command);
  });
}
function init() {
  tiles.observeAll(onTileReady);
}
features.add(import.meta.url, init, 'Focuses buffers on click anywhere, not just the header.');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9jdXMtYnVmZmVycy1vbi1jbGljay5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2ZlYXR1cmVzL2Jhc2ljL2ZvY3VzLWJ1ZmZlcnMtb24tY2xpY2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVUlfV0lORE9XU19SRVFVRVNUX0ZPQ1VTIH0gZnJvbSAnQHNyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9jbGllbnQtbWVzc2FnZXMnO1xuaW1wb3J0IHsgZGlzcGF0Y2hDbGllbnRQcnVuTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvcHJ1bi1hcGktbGlzdGVuZXInO1xuXG5hc3luYyBmdW5jdGlvbiBvblRpbGVSZWFkeSh0aWxlOiBQcnVuVGlsZSkge1xuICBpZiAodGlsZS5kb2NrZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGlsZS5jb21tYW5kID09PSAnSFEnKSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlZmluZWQtcHJ1bi9yZWZpbmVkLXBydW4vaXNzdWVzLzY4XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdGlsZVdpbmRvdyA9IHRpbGUuZnJhbWUuY2xvc2VzdChgLiR7Qy5XaW5kb3cud2luZG93fWApIGFzIEhUTUxFbGVtZW50O1xuICB0aWxlV2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZCA9IFVJX1dJTkRPV1NfUkVRVUVTVF9GT0NVUyh0aWxlLmlkKTtcbiAgICBkaXNwYXRjaENsaWVudFBydW5NZXNzYWdlKGNvbW1hbmQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgdGlsZXMub2JzZXJ2ZUFsbChvblRpbGVSZWFkeSk7XG59XG5cbmZlYXR1cmVzLmFkZChpbXBvcnQubWV0YS51cmwsIGluaXQsICdGb2N1c2VzIGJ1ZmZlcnMgb24gY2xpY2sgYW55d2hlcmUsIG5vdCBqdXN0IHRoZSBoZWFkZXIuJyk7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHQSxlQUFBLFlBQUEsTUFBQTtBQUNFLE1BQUEsS0FBQSxRQUFBO0FBQ0U7QUFBQSxFQUFBO0FBR0YsTUFBQSxLQUFBLFlBQUEsTUFBQTtBQUVFO0FBQUEsRUFBQTtBQUdGLFFBQUEsYUFBQSxLQUFBLE1BQUEsUUFBQSxJQUFBLEVBQUEsT0FBQSxNQUFBLEVBQUE7QUFDQSxjQUFBLGlCQUFBLGFBQUEsTUFBQTtBQUNFLFVBQUEsVUFBQSx5QkFBQSxLQUFBLEVBQUE7QUFDQSw4QkFBQSxPQUFBO0FBQUEsRUFBaUMsQ0FBQTtBQUVyQztBQUVBLFNBQUEsT0FBQTtBQUNFLFFBQUEsV0FBQSxXQUFBO0FBQ0Y7QUFFQSxTQUFBLElBQUEsWUFBQSxLQUFBLE1BQUEseURBQUE7In0=
