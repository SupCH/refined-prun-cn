import { createEntityStore } from './create-entity-store.js';
import { onApiMessage } from './api-messages.js';
import { castArray } from './cast-array.js';
const store = createEntityStore();
const state = store.state;
onApiMessage({
  DATA_DATA(data) {
    if (data.path[0] !== 'localmarkets' || data.path[2] !== 'ads') {
      return;
    }
    store.setMany(castArray(data.body));
    store.setFetched();
  },
  DATA_DATA_REMOVED(data) {
    const id = data.path[3];
    if (data.path[0] !== 'localmarkets' || data.path[2] !== 'ads' || id === void 0) {
      return;
    }
    store.removeOne(id);
  },
});
const localAdsStore = {
  ...state,
};
export { localAdsStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYWwtYWRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9sb2NhbC1hZHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRW50aXR5U3RvcmUgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvY3JlYXRlLWVudGl0eS1zdG9yZSc7XG5pbXBvcnQgeyBvbkFwaU1lc3NhZ2UgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvYXBpLW1lc3NhZ2VzJztcbmltcG9ydCB7IGNhc3RBcnJheSB9IGZyb20gJ0BzcmMvdXRpbHMvY2FzdC1hcnJheSc7XG5cbmNvbnN0IHN0b3JlID0gY3JlYXRlRW50aXR5U3RvcmU8UHJ1bkFwaS5Mb2NhbEFkPigpO1xuY29uc3Qgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcblxub25BcGlNZXNzYWdlKHtcbiAgREFUQV9EQVRBKGRhdGE6IHsgYm9keTogQXJyYXlhYmxlPFBydW5BcGkuTG9jYWxBZD47IHBhdGg6IHN0cmluZ1tdIH0pIHtcbiAgICBpZiAoZGF0YS5wYXRoWzBdICE9PSAnbG9jYWxtYXJrZXRzJyB8fCBkYXRhLnBhdGhbMl0gIT09ICdhZHMnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0b3JlLnNldE1hbnkoY2FzdEFycmF5KGRhdGEuYm9keSkpO1xuICAgIHN0b3JlLnNldEZldGNoZWQoKTtcbiAgfSxcbiAgREFUQV9EQVRBX1JFTU9WRUQoZGF0YTogeyBwYXRoOiBzdHJpbmdbXSB9KSB7XG4gICAgY29uc3QgaWQgPSBkYXRhLnBhdGhbM107XG4gICAgaWYgKGRhdGEucGF0aFswXSAhPT0gJ2xvY2FsbWFya2V0cycgfHwgZGF0YS5wYXRoWzJdICE9PSAnYWRzJyB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0b3JlLnJlbW92ZU9uZShpZCk7XG4gIH0sXG59KTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsQWRzU3RvcmUgPSB7XG4gIC4uLnN0YXRlLFxufTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFJQSxNQUFNLFFBQVEsa0JBQUE7QUFDZCxNQUFNLFFBQVEsTUFBTTtBQUVwQixhQUFhO0FBQUEsRUFDWCxVQUFVLE1BQTREO0FBQ3BFLFFBQUksS0FBSyxLQUFLLENBQUMsTUFBTSxrQkFBa0IsS0FBSyxLQUFLLENBQUMsTUFBTSxPQUFPO0FBQzdEO0FBQUEsSUFDRjtBQUNBLFVBQU0sUUFBUSxVQUFVLEtBQUssSUFBSSxDQUFDO0FBQ2xDLFVBQU0sV0FBQTtBQUFBLEVBQ1I7QUFBQSxFQUNBLGtCQUFrQixNQUEwQjtBQUMxQyxVQUFNLEtBQUssS0FBSyxLQUFLLENBQUM7QUFDdEIsUUFBSSxLQUFLLEtBQUssQ0FBQyxNQUFNLGtCQUFrQixLQUFLLEtBQUssQ0FBQyxNQUFNLFNBQVMsT0FBTyxRQUFXO0FBQ2pGO0FBQUEsSUFDRjtBQUNBLFVBQU0sVUFBVSxFQUFFO0FBQUEsRUFDcEI7QUFDRixDQUFDO0FBRU0sTUFBTSxnQkFBZ0I7QUFBQSxFQUMzQixHQUFHO0FBQ0w7In0=
