import { onApiMessage } from './api-messages.js';
import { createEntityStore } from './create-entity-store.js';
import { createMapGetter } from './create-map-getter.js';
const store = createEntityStore(x => x.systemId);
const state = store.state;
onApiMessage({
  SYSTEM_STARS_DATA(data) {
    store.setAll(data.stars);
    store.setFetched();
  },
});
function getStarNaturalId(star) {
  return star.address.lines[0].entity.naturalId;
}
function getStarName(star) {
  return star.address.lines[0].entity.name;
}
const getByNaturalId = createMapGetter(state.all, getStarNaturalId);
const getByName = createMapGetter(state.all, getStarName);
const find = naturalIdOrName => getByNaturalId(naturalIdOrName) ?? getByName(naturalIdOrName);
const getByPlanetNaturalId = id => getByNaturalId(id?.slice(0, -1));
const starsStore = {
  ...state,
  getByNaturalId,
  getByName,
  find,
  getByPlanetNaturalId,
};
export { getStarName, getStarNaturalId, starsStore };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9wcnVuLWFwaS9kYXRhL3N0YXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9uQXBpTWVzc2FnZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvcHJ1bi1hcGkvZGF0YS9hcGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgY3JlYXRlRW50aXR5U3RvcmUgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvY3JlYXRlLWVudGl0eS1zdG9yZSc7XG5pbXBvcnQgeyBjcmVhdGVNYXBHZXR0ZXIgfSBmcm9tICdAc3JjL2luZnJhc3RydWN0dXJlL3BydW4tYXBpL2RhdGEvY3JlYXRlLW1hcC1nZXR0ZXInO1xuXG5jb25zdCBzdG9yZSA9IGNyZWF0ZUVudGl0eVN0b3JlPFBydW5BcGkuU3Rhcj4oeCA9PiB4LnN5c3RlbUlkKTtcbmNvbnN0IHN0YXRlID0gc3RvcmUuc3RhdGU7XG5cbm9uQXBpTWVzc2FnZSh7XG4gIFNZU1RFTV9TVEFSU19EQVRBKGRhdGE6IHsgc3RhcnM6IFBydW5BcGkuU3RhcltdIH0pIHtcbiAgICBzdG9yZS5zZXRBbGwoZGF0YS5zdGFycyk7XG4gICAgc3RvcmUuc2V0RmV0Y2hlZCgpO1xuICB9LFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFyTmF0dXJhbElkKHN0YXI6IFBydW5BcGkuU3Rhcikge1xuICByZXR1cm4gc3Rhci5hZGRyZXNzLmxpbmVzWzBdLmVudGl0eS5uYXR1cmFsSWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFyTmFtZShzdGFyOiBQcnVuQXBpLlN0YXIpIHtcbiAgcmV0dXJuIHN0YXIuYWRkcmVzcy5saW5lc1swXS5lbnRpdHkubmFtZTtcbn1cblxuY29uc3QgZ2V0QnlOYXR1cmFsSWQgPSBjcmVhdGVNYXBHZXR0ZXIoc3RhdGUuYWxsLCBnZXRTdGFyTmF0dXJhbElkKTtcbmNvbnN0IGdldEJ5TmFtZSA9IGNyZWF0ZU1hcEdldHRlcihzdGF0ZS5hbGwsIGdldFN0YXJOYW1lKTtcblxuY29uc3QgZmluZCA9IChuYXR1cmFsSWRPck5hbWU/OiBzdHJpbmcgfCBudWxsKSA9PlxuICBnZXRCeU5hdHVyYWxJZChuYXR1cmFsSWRPck5hbWUpID8/IGdldEJ5TmFtZShuYXR1cmFsSWRPck5hbWUpO1xuXG5jb25zdCBnZXRCeVBsYW5ldE5hdHVyYWxJZCA9IChpZD86IHN0cmluZyB8IG51bGwpID0+IGdldEJ5TmF0dXJhbElkKGlkPy5zbGljZSgwLCAtMSkpO1xuXG5leHBvcnQgY29uc3Qgc3RhcnNTdG9yZSA9IHtcbiAgLi4uc3RhdGUsXG4gIGdldEJ5TmF0dXJhbElkLFxuICBnZXRCeU5hbWUsXG4gIGZpbmQsXG4gIGdldEJ5UGxhbmV0TmF0dXJhbElkLFxufTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFJQSxNQUFNLFFBQVEsa0JBQWdDLENBQUEsTUFBSyxFQUFFLFFBQVE7QUFDN0QsTUFBTSxRQUFRLE1BQU07QUFFcEIsYUFBYTtBQUFBLEVBQ1gsa0JBQWtCLE1BQWlDO0FBQ2pELFVBQU0sT0FBTyxLQUFLLEtBQUs7QUFDdkIsVUFBTSxXQUFBO0FBQUEsRUFDUjtBQUNGLENBQUM7QUFFTSxTQUFTLGlCQUFpQixNQUFvQjtBQUNuRCxTQUFPLEtBQUssUUFBUSxNQUFNLENBQUMsRUFBRSxPQUFPO0FBQ3RDO0FBRU8sU0FBUyxZQUFZLE1BQW9CO0FBQzlDLFNBQU8sS0FBSyxRQUFRLE1BQU0sQ0FBQyxFQUFFLE9BQU87QUFDdEM7QUFFQSxNQUFNLGlCQUFpQixnQkFBZ0IsTUFBTSxLQUFLLGdCQUFnQjtBQUNsRSxNQUFNLFlBQVksZ0JBQWdCLE1BQU0sS0FBSyxXQUFXO0FBRXhELE1BQU0sT0FBTyxDQUFDLG9CQUNaLGVBQWUsZUFBZSxLQUFLLFVBQVUsZUFBZTtBQUU5RCxNQUFNLHVCQUF1QixDQUFDLE9BQXVCLGVBQWUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBRTdFLE1BQU0sYUFBYTtBQUFBLEVBQ3hCLEdBQUc7QUFBQSxFQUNIO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7In0=
