import { mergeMaterialAmounts } from './sort-materials.js';
import { sumMaterialAmountPrice } from './cx.js';
function calcBuildingCondition(age) {
  return age > 180 ? 0 : 1 - age / 180;
}
function isRepairableBuilding(building) {
  return building.module.type === 'RESOURCES' || building.module.type === 'PRODUCTION';
}
function getBuildingBuildMaterials(building, site) {
  const buildOption = site.buildOptions.options.find(
    x => x.ticker === building.module.reactorTicker,
  );
  if (buildOption) {
    return buildOption.materials.quantities;
  }
  const materials = building.reclaimableMaterials.concat(building.repairMaterials);
  return mergeMaterialAmounts(materials);
}
function calcBuildingMarketValue(building, site) {
  return sumMaterialAmountPrice(getBuildingBuildMaterials(building, site));
}
export {
  calcBuildingCondition,
  calcBuildingMarketValue,
  getBuildingBuildMaterials,
  isRepairableBuilding,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGRpbmdzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS9idWlsZGluZ3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2VNYXRlcmlhbEFtb3VudHMgfSBmcm9tICdAc3JjL2NvcmUvc29ydC1tYXRlcmlhbHMnO1xuaW1wb3J0IHsgc3VtTWF0ZXJpYWxBbW91bnRQcmljZSB9IGZyb20gJ0BzcmMvaW5mcmFzdHJ1Y3R1cmUvZmlvL2N4JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNCdWlsZGluZ0NvbmRpdGlvbihhZ2U6IG51bWJlcikge1xuICAvLyBUaGlzIGlzbid0IHF1aXRlIHJpZ2h0LCBidXQgd2lsbCBiZSBvZmYgYnkgb25seSAxIE1DRyBhdCBtb3N0XG4gIHJldHVybiBhZ2UgPiAxODAgPyAwIDogMSAtIGFnZSAvIDE4MDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVwYWlyYWJsZUJ1aWxkaW5nKGJ1aWxkaW5nOiBQcnVuQXBpLlBsYXRmb3JtKSB7XG4gIHJldHVybiBidWlsZGluZy5tb2R1bGUudHlwZSA9PT0gJ1JFU09VUkNFUycgfHwgYnVpbGRpbmcubW9kdWxlLnR5cGUgPT09ICdQUk9EVUNUSU9OJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1aWxkaW5nQnVpbGRNYXRlcmlhbHMoYnVpbGRpbmc6IFBydW5BcGkuUGxhdGZvcm0sIHNpdGU6IFBydW5BcGkuU2l0ZSkge1xuICBjb25zdCBidWlsZE9wdGlvbiA9IHNpdGUuYnVpbGRPcHRpb25zLm9wdGlvbnMuZmluZChcbiAgICB4ID0+IHgudGlja2VyID09PSBidWlsZGluZy5tb2R1bGUucmVhY3RvclRpY2tlcixcbiAgKTtcbiAgaWYgKGJ1aWxkT3B0aW9uKSB7XG4gICAgcmV0dXJuIGJ1aWxkT3B0aW9uLm1hdGVyaWFscy5xdWFudGl0aWVzO1xuICB9XG5cbiAgY29uc3QgbWF0ZXJpYWxzID0gYnVpbGRpbmcucmVjbGFpbWFibGVNYXRlcmlhbHMuY29uY2F0KGJ1aWxkaW5nLnJlcGFpck1hdGVyaWFscyk7XG4gIHJldHVybiBtZXJnZU1hdGVyaWFsQW1vdW50cyhtYXRlcmlhbHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0J1aWxkaW5nTWFya2V0VmFsdWUoYnVpbGRpbmc6IFBydW5BcGkuUGxhdGZvcm0sIHNpdGU6IFBydW5BcGkuU2l0ZSkge1xuICByZXR1cm4gc3VtTWF0ZXJpYWxBbW91bnRQcmljZShnZXRCdWlsZGluZ0J1aWxkTWF0ZXJpYWxzKGJ1aWxkaW5nLCBzaXRlKSk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHTyxTQUFTLHNCQUFzQixLQUFhO0FBRWpELFNBQU8sTUFBTSxNQUFNLElBQUksSUFBSSxNQUFNO0FBQ25DO0FBRU8sU0FBUyxxQkFBcUIsVUFBNEI7QUFDL0QsU0FBTyxTQUFTLE9BQU8sU0FBUyxlQUFlLFNBQVMsT0FBTyxTQUFTO0FBQzFFO0FBRU8sU0FBUywwQkFBMEIsVUFBNEIsTUFBb0I7QUFDeEYsUUFBTSxjQUFjLEtBQUssYUFBYSxRQUFRO0FBQUEsSUFDNUMsQ0FBQSxNQUFLLEVBQUUsV0FBVyxTQUFTLE9BQU87QUFBQSxFQUFBO0FBRXBDLE1BQUksYUFBYTtBQUNmLFdBQU8sWUFBWSxVQUFVO0FBQUEsRUFDL0I7QUFFQSxRQUFNLFlBQVksU0FBUyxxQkFBcUIsT0FBTyxTQUFTLGVBQWU7QUFDL0UsU0FBTyxxQkFBcUIsU0FBUztBQUN2QztBQUVPLFNBQVMsd0JBQXdCLFVBQTRCLE1BQW9CO0FBQ3RGLFNBQU8sdUJBQXVCLDBCQUEwQixVQUFVLElBQUksQ0FBQztBQUN6RTsifQ==
